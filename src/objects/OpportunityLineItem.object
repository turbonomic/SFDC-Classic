<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>AddProduct</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>AddProduct</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>AddProduct</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>ChoosePricebook</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>ChoosePricebook</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>ChoosePricebook</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>EditAllProduct</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>EditAllProduct</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>EditAllProduct</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <enableFeeds>false</enableFeeds>
    <fields>
        <fullName>Converted_to_Asset__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Converted to Asset?</label>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Description</fullName>
    </fields>
    <fields>
        <fullName>Discount</fullName>
    </fields>
    <fields>
        <fullName>Discount__c</fullName>
        <externalId>false</externalId>
        <formula>IF(ListPrice=0,NULL,(ListPrice-UnitPrice)/ListPrice)</formula>
        <label>Discount (%)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <type>Percent</type>
    </fields>
    <fields>
        <fullName>License_Entity__c</fullName>
        <externalId>false</externalId>
        <label>License Entity</label>
        <required>false</required>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetName>Pricing_Type</valueSetName>
        </valueSet>
    </fields>
    <fields>
        <fullName>LineItemID__c</fullName>
        <externalId>false</externalId>
        <formula>Id</formula>
        <label>LineItemID</label>
        <required>false</required>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ListPrice</fullName>
    </fields>
    <fields>
        <fullName>OpportunityId</fullName>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Pricebook_ID__c</fullName>
        <externalId>false</externalId>
        <formula>PricebookEntryId</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Pricebook ID</label>
        <required>false</required>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Product2Id</fullName>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ProductCode</fullName>
    </fields>
    <fields>
        <fullName>Product_Family_Maintenance_Split__c</fullName>
        <externalId>false</externalId>
        <formula>IF(CONTAINS(TEXT(PricebookEntry.Product2.Family),&quot;Maintenance&quot;),IF(TEXT(Opportunity.Type)=&quot;Maintenance Renewal&quot;,&quot;Maintenance (Renewal)&quot;,&quot;Maintenance (New)&quot;),TEXT(PricebookEntry.Product2.Family))</formula>
        <label>Product Family (Maintenance Split)</label>
        <required>false</required>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Product_Name_Text__c</fullName>
        <externalId>false</externalId>
        <label>Product Name (Text)</label>
        <required>false</required>
        <type>TextArea</type>
    </fields>
    <fields>
        <fullName>Quantity</fullName>
    </fields>
    <fields>
        <fullName>Quantity_Type__c</fullName>
        <externalId>false</externalId>
        <label>Quantity Type</label>
        <required>false</required>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Cores</fullName>
                    <default>false</default>
                    <label>Cores</label>
                </value>
                <value>
                    <fullName>Sockets</fullName>
                    <default>false</default>
                    <label>Sockets</label>
                </value>
                <value>
                    <fullName>VMs</fullName>
                    <default>false</default>
                    <label>VMs</label>
                </value>
                <value>
                    <fullName>Training</fullName>
                    <default>false</default>
                    <label>Training</label>
                </value>
                <value>
                    <fullName>Other</fullName>
                    <default>false</default>
                    <label>Other</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>SBQQ__ParentID__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <inlineHelpText>ID of the opportunity product that came from this product&apos;s bundle.</inlineHelpText>
        <label>Parent ID</label>
        <length>18</length>
        <required>false</required>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>SBQQ__QuoteLine__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <description>Quote line that generated this Opportunity Product.</description>
        <externalId>false</externalId>
        <label>Quote Line</label>
        <referenceTo>SBQQ__QuoteLine__c</referenceTo>
        <relationshipLabel>Opportunity Product</relationshipLabel>
        <relationshipName>OpportunityProducts</relationshipName>
        <required>false</required>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>SBQQ__SubscriptionType__c</fullName>
        <deprecated>false</deprecated>
        <description>Indicates the subscription type to determine contract&apos;s pricing.</description>
        <externalId>false</externalId>
        <inlineHelpText>Indicates the subscription type to determine contract&apos;s pricing.</inlineHelpText>
        <label>Subscription Type</label>
        <required>false</required>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetName>SBQQ__SubscriptionType</valueSetName>
        </valueSet>
    </fields>
    <fields>
        <fullName>ServiceDate</fullName>
    </fields>
    <fields>
        <fullName>Subtotal</fullName>
    </fields>
    <fields>
        <fullName>Term__c</fullName>
        <externalId>false</externalId>
        <formula>TEXT(PricebookEntry.Product2.Term__c)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Term</label>
        <required>false</required>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>TotalPrice</fullName>
    </fields>
    <fields>
        <fullName>Total_List_Price__c</fullName>
        <externalId>false</externalId>
        <formula>ListPrice*Quantity</formula>
        <label>Total List Price</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Total_Price_Formula__c</fullName>
        <description>Native Total Price field pulls in Amount if no products are present on the opp (this field does not)</description>
        <externalId>false</externalId>
        <formula>UnitPrice*Quantity</formula>
        <label>Total Price (Formula)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Total_Sales_Price__c</fullName>
        <externalId>false</externalId>
        <formula>UnitPrice*Quantity</formula>
        <label>Total Sales Price</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Training_Revenue__c</fullName>
        <description>Copy of the Training Revenue field on the Asset Object to be accessible from a products report requested by Angus</description>
        <externalId>false</externalId>
        <formula>IF( CONTAINS( Product_Name_Text__c, &quot;Training&quot; ), Total_Sales_Price__c, 
IF( CONTAINS( Product_Name_Text__c, &quot;RAPID Success&quot; ), Total_Sales_Price__c/2 , 
0))</formula>
        <label>Training Revenue</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UnitPrice</fullName>
    </fields>
    <validationRules>
        <fullName>Error_Perm_Products_on_sub_50_Soc_Opps</fullName>
        <active>false</active>
        <errorConditionFormula>AND(CONTAINS(Product2.ProductCode,&quot;PERM&quot;), Opportunity.of_CPU_Sockets__c&lt;=50,
OR(ISPICKVAL(Opportunity.StageName,&quot;Identify&quot;),
   ISPICKVAL(Opportunity.StageName,&quot;Pipeline&quot;),
   ISPICKVAL(Opportunity.StageName,&quot;Upside&quot;),
   ISPICKVAL(Opportunity.StageName,&quot;Strong Upside&quot;),
   ISPICKVAL(Opportunity.StageName,&quot;Commit&quot;),
   ISPICKVAL(Opportunity.StageName,&quot;PO Received&quot;)),
Opportunity.CloseDate&gt; DATE(2015,1,12),
$UserRole.Name&lt;&gt;&quot;VMT SF admin&quot;,
$UserRole.Name&lt;&gt;&quot;CFO&quot;)</errorConditionFormula>
        <errorMessage>Not allowed to have a Perm license on any opportunity at or under 50 sockets</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Restrict_Product_Changes</fullName>
        <active>true</active>
        <description>Only Finance and Ops should have the ability to modify Opportunity Products</description>
        <errorConditionFormula>AND( 
$UserRole.Name&lt;&gt;&quot;CFO&quot;, 
$UserRole.Name&lt;&gt;&quot;VMT SF admin&quot;)</errorConditionFormula>
        <errorMessage>Opportunity Products should only be modified by Finance. Please reach out to finance@turbonomic.com if you need to make any changes on the opportunity products.</errorMessage>
    </validationRules>
    <webLinks>
        <fullName>Convert_Prod_to_Assets_List</fullName>
        <availability>online</availability>
        <displayType>massActionButton</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Convert Prod. to Assets</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <requireRowSelection>false</requireRowSelection>
        <url>// Project: Convert Assets from Product Info.
// Created by: Comity Designs [Developer: Rashi Girdhar]
// Custom Detail Page Button: Convert Products to Assets
// Description: Custom Detail Page Button - OnClick Javascript [Pop-up logic with redirect to VF Page]
// Other Package Classes: ProductsToAssets.cls, AssetWrapper.cls
// VisualForce Page: ProductsToAssets.page
// Date: 1/15/2010

// Functions
// Throws pop-up alert on an un-successful click to VF Page [Opportunity is not Closed and/or does not have any Products]
function popupErrorAlert() {
	var alertString=&quot;IMPORTANT NOTICE: \nPlease make sure that the Opportunity is &apos;Closed&apos; and has at least one &apos;Product&apos;.&quot;;
	alert(alertString);
}

// Throws pop-up alert on a successful click to VF Page
function popupDupesAlert() {
	var alertString=&quot;Notice: &quot; + &quot;\n&quot; + &quot;Be mindful of already converted Assets on the Account: {!Opportunity.Account}&quot;;
	alert(alertString);
}

// Redirects to VisualForce Page with Opportunity ID and Account ID as Query String parameters
function redirect() {
	location.href = &quot;/apex/ProductsToAssets?oid={!Opportunity.Id}&amp;aid={!Opportunity.AccountId}&quot;;
}

// Main
// If Opportunity is closed [Probability=100] and has products [Roll Up Summary field - Count on Products greater than 0]
//  then redirect to VF page, other wise throw an alert.
if(({!Opportunity.Probability} &gt;= 99) &amp;&amp; {!Opportunity.Product_Count__c} &gt; 0) {
	redirect();
 } else {
	popupErrorAlert();
}</url>
    </webLinks>
    <webLinks>
        <fullName>Mass_Delete</fullName>
        <availability>online</availability>
        <displayType>massActionButton</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Mass Delete</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <requireRowSelection>true</requireRowSelection>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/9.0/connection.js&quot;)}

var records = {!GETRECORDIDS(  $ObjectType.OpportunityLineItem )};

if (records[0] == null) {
alert(&quot;Please select at least one record.&quot;) }
else {

var errors = [];
var result = sforce.connection.deleteIds(records);
if (result &amp;&amp; result.length){
var numFailed = 0;
var numSucceeded = 0;
for (var i = 0; i &lt; result.length; i++){
var res = result[i];
if (res &amp;&amp; res.success == &apos;true&apos;){
numSucceeded++;
} else {
var es = res.getArray(&quot;errors&quot;);
if (es.length &gt; 0) {
errors.push(es[0].message);
}
numFailed++;
}
}
if (numFailed &gt; 0){
alert(&quot;Failed: &quot; + numFailed + &quot;\nSucceeded: &quot; + numSucceeded + &quot; \n Due to: &quot; + errors.join(&quot;\n&quot;));
} else {
alert(&quot;Number of records deleted: &quot; + numSucceeded);
}
}
window.location.reload();
}</url>
    </webLinks>
</CustomObject>
